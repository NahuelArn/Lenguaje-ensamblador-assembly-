Escribir un programa que imprime “UNIVERSIDAD NACIONAL DE LA PLATA” en la impresora a
través del HAND-SHAKE. La comunicación se establece por interrupciones emitidas desde el HANDSHAKE cada vez que la impresora se desocupa.

;CONFIG PIC
EOI EQU 20H
IMR EQU 21H
;INTERRUPCION HAMD
HAND_INTER EQU 26H


;CONFIG HAND-SHAKE
HAND_DATO EQU 40H
HAND_ESTADO EQU 41H


ORG 1000H
MSJ DB "UNIVERSIDAD NACIONAL DE LA PLATA"
LONGITUD DB ?

ORG 40

PUNTERO DW 3000H
ORG 3000H
PUSH AX
CMP BX, OFFSET LONGITUD
JZ FINAL
;LE MANDAMOS EL CARACTER
MOV AL, [BX]
OUT HAND_DATO, AL
INC BX
;AVISO AL PIC QUE FINALIZA LA INTERRUPCION
MOV AL, EOI
OUT EOI, AL
POP AX

FINAL: IRET 

ORG 2000H
CLI
;CONFIGURAR EL VECTOR DE INTERRUPCIONES
MOV AL, 0FBH;1111 1011B
OUT IMR, AL

;CONFIGURO MI PUNTERO
MOV AL, 10
OUT HAND_INTER, AL
STI


;ME POSICIOBI EN EL PRINCIPIO DE MI CADENA
MOV BX, OFFSET MSJ

;CONFIGURAMOS EL HAND-SHAKE PARA INTERRUPCION
IN AL, HAND_ESTADO
OR AL, 80H         ;10000000
OUT HAND_ESTADO, AL ;1XXXXXXX


;POLLING
POL: NOP
CMP BX, OFFSET LONGITUD
JNZ POL

;DESACTIVO EL HAND-SHAKE POR INTERRUPCION
IN AL, HAND_ESTADO
AND AL, 127 ;01111111B 07FH
OUT HAND_ESTADO, AL

INT 0
END
