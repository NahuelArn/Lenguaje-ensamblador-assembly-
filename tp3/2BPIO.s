Escribir un programa para imprimir el mensaje “ORGANIZACION Y ARQUITECTURA DE
COMPUTADORAS” utilizando la impresora a través de la PIO.

;PIC
EOI EQU 20H
IMR EQU 21H
F10_INT EQU 24H

TIMER_INT EQU 25H
;CONFIG TIMER
CONT EQU 10H
COMP EQU 11H
;PIO
PA EQU 30H
PB EQU 31H

CA EQU 32H
CB EQU 33H

ORG 1000H
CARACTER DB "ORGANIZACION Y "
SALTO DB 0AH
CARACTER2 DB "ARQUITECTURA DE "
PUNTOYCOMA DB 0AH
CARACTER3 DB "COMPUTADORAS"
FIN_TABLA DB ?

ORG 3000H
CONFIG_PIO: NOP
PUSH AX
;CONFIG PIO

;INICIALIZO STROBE EN 0
MOV AL, 11111101B ; CONFIG STROBE EN 0 SALIDA, Y BUSY DE ENTRADA 1
OUT CA, AL ;CARGAMOS MI STROBE QUE ES 
;PUERTO DE DATOS
MOV AL, 0 ; TODOS DE SALIDA
OUT CB, AL

;MANDO STROBE EN 0
IN AL, PA
AND AL, 11111101B
OUT PA, AL
POP AX
RET
ORG 2000H

CALL CONFIG_PIO

MOV BX, OFFSET CARACTER ;ESTA AFIERA DEL WHILE PORQ, NO AVANZABA EN LA CADENA
;ACA HAGO LLAMO A POL/ CONTROL DE ESTADO, ME FIJO QUE LA IMPRESORA NO ESTE OCUPADA
POLL: NOP
IN AL, PA
AND AL, 1 ;SI ME DA 1 LA IMPRESORA ESTA OCUPADA BUSY
JNZ POLL
;CUANDO SALE MANDO EL CARACTER
;MANDO CARACTER
MOV AL, [BX]
OUT PB, AL

;MANDO EL PULSO DE STROBE EN 1, QUE 
IN AL, PA
OR AL, 2
OUT PA, AL

;MANDO STROBE EN 0
IN AL, PA
AND AL, 11111101B
OUT PA, AL

INC BX
CMP BX, OFFSET FIN_TABLA
JNZ POLL


INT 0
END